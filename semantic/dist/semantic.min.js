 /*
 * # Semantic UI - x.x
 * https://github.com/Semantic-Org/Semantic-UI
 * http://www.semantic-ui.com/
 *
 * Copyright 2014 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,n,t,o){e.site=e.fn.site=function(i){var a,r,s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1),m=e.isPlainObject(i)?e.extend(!0,{},e.site.settings,i):e.extend({},e.site.settings),f=m.namespace,g=m.error,p="module-"+f,b=e(t),v=b,h=this,y=v.data(p);return a={initialize:function(){a.instantiate()},instantiate:function(){a.verbose("Storing instance of site",a),y=a,v.data(p,a)},normalize:function(){a.fix.console(),a.fix.requestAnimationFrame()},fix:{console:function(){a.debug("Normalizing window.console"),(console===o||console.log===o)&&(a.verbose("Console not available, normalizing events"),a.disable.console()),("undefined"==typeof console.group||"undefined"==typeof console.groupEnd||"undefined"==typeof console.groupCollapsed)&&(a.verbose("Console group not available, normalizing events"),n.console.group=function(){},n.console.groupEnd=function(){},n.console.groupCollapsed=function(){}),"undefined"==typeof console.markTimeline&&(a.verbose("Mark timeline not available, normalizing events"),n.console.markTimeline=function(){})},consoleClear:function(){a.debug("Disabling programmatic console clearing"),n.console.clear=function(){}},requestAnimationFrame:function(){a.debug("Normalizing requestAnimationFrame"),n.requestAnimationFrame===o&&(a.debug("RequestAnimationFrame not available, normailizing event"),n.requestAnimationFrame=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(n){return e.fn[n]!==o&&e.fn[n].settings!==o},enabled:{modules:function(n){var t=[];return n=n||m.modules,e.each(n,function(e,n){a.moduleExists(n)&&t.push(n)}),t}},disabled:{modules:function(n){var t=[];return n=n||m.modules,e.each(n,function(e,n){a.moduleExists(n)||t.push(n)}),t}},change:{setting:function(n,t,i,r){i="string"==typeof i?"all"===i?m.modules:[i]:i||m.modules,r=r!==o?r:!0,e.each(i,function(o,i){var s,c=a.moduleExists(i)?e.fn[i].settings.namespace||!1:!0;a.moduleExists(i)&&(a.verbose("Changing default setting",n,t,i),e.fn[i].settings[n]=t,r&&c&&(s=e(":data(module-"+c+")"),s.length>0&&(a.verbose("Modifying existing settings",s),s[i]("setting",n,t))))})},settings:function(n,t,i){t="string"==typeof t?[t]:t||m.modules,i=i!==o?i:!0,e.each(t,function(t,o){var r;a.moduleExists(o)&&(a.verbose("Changing default setting",n,o),e.extend(!0,e.fn[o].settings,n),i&&f&&(r=e(":data(module-"+f+")"),r.length>0&&(a.verbose("Modifying existing settings",r),r[o]("setting",n))))})}},enable:{console:function(){a.console(!0)},debug:function(e,n){e=e||m.modules,a.debug("Enabling debug for modules",e),a.change.setting("debug",!0,e,n)},verbose:function(e,n){e=e||m.modules,a.debug("Enabling verbose debug for modules",e),a.change.setting("verbose",!0,e,n)}},disable:{console:function(){a.console(!1)},debug:function(e,n){e=e||m.modules,a.debug("Disabling debug for modules",e),a.change.setting("debug",!1,e,n)},verbose:function(e,n){e=e||m.modules,a.debug("Disabling verbose debug for modules",e),a.change.setting("verbose",!1,e,n)}},console:function(e){if(e){if(y.cache.console===o)return void a.error(g.console);a.debug("Restoring console function"),n.console=y.cache.console}else a.debug("Disabling console function"),y.cache.console=n.console,n.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){a.verbose("Destroying previous site for",v),v.removeData(p)},cache:{},setting:function(n,t){if(e.isPlainObject(n))e.extend(!0,m,n);else{if(t===o)return m[n];m[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,a,n);else{if(t===o)return a[n];a[n]=t}},debug:function(){m.debug&&(m.performance?a.performance.log(arguments):(a.debug=Function.prototype.bind.call(console.info,console,m.name+":"),a.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?a.performance.log(arguments):(a.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),a.verbose.apply(console,arguments)))},error:function(){a.error=Function.prototype.bind.call(console.error,console,m.name+":"),a.error.apply(console,arguments)},performance:{log:function(e){var n,t,o;m.performance&&(n=(new Date).getTime(),o=s||n,t=n-o,s=n,c.push({Element:h,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":t})),clearTimeout(a.performance.timer),a.performance.timer=setTimeout(a.performance.display,500)},display:function(){var n=m.name+":",t=0;s=!1,clearTimeout(a.performance.timer),e.each(c,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(n),console.table?console.table(c):e.each(c,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(n,t,i){var s,c,l,u=y;return t=t||d,i=h||i,"string"==typeof n&&u!==o&&(n=n.split(/[\. ]/),s=n.length-1,e.each(n,function(t,i){var r=t!=s?i+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(u[r])&&t!=s)u=u[r];else{if(u[r]!==o)return c=u[r],!1;if(!e.isPlainObject(u[i])||t==s)return u[i]!==o?(c=u[i],!1):(a.error(g.method,n),!1);u=u[i]}})),e.isFunction(c)?l=c.apply(i,t):c!==o&&(l=c),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),c}},u?(y===o&&a.initialize(),a.invoke(l)):(y!==o&&a.destroy(),a.initialize()),r!==o?r:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(n){return function(t){return!!e.data(t,n)}}):function(n,t,o){return!!e.data(n,o[3])}})}(jQuery,window,document),function(e,n,t,o){"use strict";e.fn.embed=function(t){var i,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var m,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.embed.settings,t):e.extend({},e.fn.embed.settings),g=f.selector,p=f.className,b=f.sources,v=f.error,h=f.metadata,y=f.namespace,x=f.templates,C="."+y,w="module-"+y,T=(e(n),e(this)),P=T.find(g.placeholder),R=T.find(g.icon),S=T.find(g.embed),A=this,k=T.data(w);m={initialize:function(){m.debug("Initializing embed"),m.determine.autoplay(),m.create(),m.bind.events(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),k=m,T.data(w,m)},destroy:function(){m.verbose("Destroying previous instance of embed"),m.reset(),T.removeData(w).off(C)},refresh:function(){m.verbose("Refreshing selector cache"),P=T.find(g.placeholder),R=T.find(g.icon),S=T.find(g.embed)},bind:{events:function(){m.has.placeholder()&&(m.debug("Adding placeholder events"),console.log(T,g.placeholder),T.on("click"+C,g.placeholder,m.createAndShow).on("click"+C,g.icon,m.createAndShow))}},create:function(){var e=m.get.placeholder();e?m.createPlaceholder():m.createAndShow()},createPlaceholder:function(e){{var n=m.get.icon(),t=m.get.url();m.generate.embed(t)}e=e||m.get.placeholder(),T.html(x.placeholder(e,n)),m.debug("Creating placeholder for embed",e,n)},createEmbed:function(n){m.refresh(),n=n||m.get.url(),console.log(n),S=e("<div/>").addClass(p.embed).html(m.generate.embed(n)).appendTo(T),f.onCreate.call(A,n),m.debug("Creating embed object",S)},createAndShow:function(){console.log("cands"),m.createEmbed(),m.show()},change:function(e,n,t){m.debug("Changing video to ",e,n,t),T.data(h.source,e).data(h.id,n).data(h.url,t),m.create()},reset:function(){m.debug("Clearing embed and showing placeholder"),m.remove.active(),m.remove.embed(),m.showPlaceholder(),f.onReset.call(A)},show:function(){m.debug("Showing embed"),m.set.active(),f.onDisplay.call(A)},hide:function(){m.debug("Hiding embed"),m.showPlaceholder()},showPlaceholder:function(){m.debug("Showing placeholder image"),m.remove.active(),f.onPlaceholderDisplay.call(A)},get:{id:function(){return f.id||T.data(h.id)},placeholder:function(){return f.placeholder||T.data(h.placeholder)},icon:function(){return f.icon?f.icon:T.data(h.icon)!==o?T.data(h.icon):m.determine.icon()},source:function(e){return f.source?f.source:T.data(h.source)!==o?T.data(h.source):m.determine.source()},type:function(){var e=m.get.source();return b[e]!==o?b[e].type:!1},url:function(){return f.url?f.url:T.data(h.url)!==o?T.data(h.url):m.determine.url()}},determine:{autoplay:function(){m.should.autoplay()&&(f.autoplay=!0)},source:function(n){var t=!1;return n=n||m.get.url(),n&&e.each(b,function(e,o){return-1!==n.search(o.domain)?(t=e,!1):void 0}),t},icon:function(){var e=m.get.source();return b[e]!==o?b[e].icon:!1},url:function(){var e,n=f.id||T.data(h.id),t=f.source||T.data(h.source);return e=b[t]!==o?b[t].url.replace("{id}",n):!1,e&&T.data(h.url,e),e}},set:{active:function(){T.addClass(p.active)}},remove:{active:function(){T.removeClass(p.active)},embed:function(){S.empty()}},encode:{parameters:function(e){var n,t=[];for(n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&amp;")}},generate:{embed:function(e){m.debug("Generating embed html");var n,t,o=m.get.source();return e=m.get.url(e),e?(t=m.generate.parameters(o),n=x.iframe(e,t)):m.error(v.noURL,T),n},parameters:function(n,t){var i=b[n]&&b[n].parameters!==o?b[n].parameters(f):{};return t=t||f.parameters,t&&(i=e.extend({},i,t)),i=f.onEmbed(i),m.encode.parameters(i)}},has:{placeholder:function(){return f.placeholder||T.data(h.placeholder)}},should:{autoplay:function(){return"auto"===f.autoplay?f.placeholder||T.data(h.placeholder)!==o:f.autoplay}},is:{video:function(){return"video"==m.get.type()}},setting:function(n,t){if(m.debug("Changing setting",n,t),e.isPlainObject(n))e.extend(!0,f,n);else{if(t===o)return f[n];f[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,m,n);else{if(t===o)return m[n];m[n]=t}},debug:function(){f.debug&&(f.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,f.name+":"),m.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,f.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var n,t,o;f.performance&&(n=(new Date).getTime(),o=s||n,t=n-o,s=n,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":t})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var n=f.name+":",t=0;s=!1,clearTimeout(m.performance.timer),e.each(c,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",r&&(n+=" '"+r+"'"),a.length>1&&(n+=" ("+a.length+")"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(n),console.table?console.table(c):e.each(c,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(n,t,a){var r,s,c,l=k;return t=t||d,a=A||a,"string"==typeof n&&l!==o&&(n=n.split(/[\. ]/),r=n.length-1,e.each(n,function(t,i){var a=t!=r?i+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(l[a])&&t!=r)l=l[a];else{if(l[a]!==o)return s=l[a],!1;if(!e.isPlainObject(l[i])||t==r)return l[i]!==o?(s=l[i],!1):(m.error(v.method,n),!1);l=l[i]}})),e.isFunction(s)?c=s.apply(a,t):s!==o&&(c=s),e.isArray(i)?i.push(c):i!==o?i=[i,c]:c!==o&&(i=c),s}},u?(k===o&&m.initialize(),m.invoke(l)):(k!==o&&k.invoke("destroy"),m.initialize())}),i!==o?i:this},e.fn.embed.settings={name:"Embed",namespace:"embed",debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.colors||o,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.colors||o,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,n){return'<iframe src="'+e+"?="+n+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,n){var t="";return n&&(t+='<i class="'+n+' icon"></i>'),e&&(t+='<img class="placeholder" src="'+e+'">'),t}},api:!0,onPause:function(){},onPlay:function(){},onStop:function(){}}}(jQuery,window,document),function(e,n,t,o){"use strict";e.fn.transition=function(){{var i,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments,u=l[0],d=[].slice.call(arguments,1),m="string"==typeof u;n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(e){setTimeout(e,0)}}return a.each(function(n){var f,g,p,b,v,h,y,x,C,w=e(this),T=this;C={initialize:function(){f=C.get.settings.apply(T,l),b=f.className,p=f.error,v=f.metadata,x="."+f.namespace,y="module-"+f.namespace,g=w.data(y)||C,h=C.get.animationEndEvent(),m&&(m=C.invoke(u)),m===!1&&(C.verbose("Converted arguments into settings object",f),f.interval?C.delay(f.animate):C.animate(),C.instantiate())},instantiate:function(){C.verbose("Storing instance of module",C),g=C,w.data(y,g)},destroy:function(){C.verbose("Destroying previous module for",T),w.removeData(y)},refresh:function(){C.verbose("Refreshing display type on next animation"),delete C.displayType},forceRepaint:function(){C.verbose("Forcing element repaint");var e=w.parent(),n=w.next();0===n.length?w.detach().appendTo(e):w.detach().insertBefore(n)},repaint:function(){C.verbose("Repainting element");T.offsetWidth},delay:function(e){var t,i,r=C.get.animationDirection();r||(r=C.can.transition()?C.get.direction():"static"),e=e!==o?e:f.interval,t="auto"==f.reverse&&r==b.outward,i=t||1==f.reverse?(a.length-n)*f.interval:n*f.interval,C.debug("Delaying animation by",i),setTimeout(C.animate,i)},animate:function(e){if(f=e||f,!C.is.supported())return C.error(p.support),!1;if(C.debug("Preparing animation",f.animation),C.is.animating()){if(f.queue)return!f.allowRepeats&&C.has.direction()&&C.is.occurring()&&C.queuing!==!0?C.debug("Animation is currently occurring, preventing queueing same animation",f.animation):C.queue(f.animation),!1;if(!f.allowRepeats&&C.is.occurring())return C.debug("Animation is already occurring, will not execute repeated animation",f.animation),!1;C.debug("New animation started, completing previous early",f.animation),g.complete()}C.can.animate()?C.set.animating(f.animation):C.error(p.noAnimation,f.animation,T)},reset:function(){C.debug("Resetting animation to beginning conditions"),C.remove.animationCallbacks(),C.restore.conditions(),C.remove.animating()},queue:function(e){C.debug("Queueing animation of",e),C.queuing=!0,w.one(h+".queue"+x,function(){C.queuing=!1,C.repaint(),C.animate.apply(this,f)})},complete:function(e){C.debug("Animation complete",f.animation),C.remove.completeCallback(),C.remove.failSafe(),C.is.looping()||(C.is.outward()?(C.verbose("Animation is outward, hiding element"),C.restore.conditions(),C.hide()):C.is.inward()?(C.verbose("Animation is outward, showing element"),C.restore.conditions(),C.show()):C.restore.conditions())},force:{visible:function(){var e=w.attr("style"),n=C.get.userStyle(),t=C.get.displayType(),i=n+"display: "+t+" !important;",a=w.css("display"),r=e===o||""===e;a!==t?(C.verbose("Overriding default display to show element",t),w.attr("style",i)):r&&w.removeAttr("style")},hidden:function(){var e=w.attr("style"),n=w.css("display"),t=e===o||""===e;"none"===n||C.is.hidden()?t&&w.removeAttr("style"):(C.verbose("Overriding default display to hide element"),w.css("display","none"))}},has:{direction:function(n){var t=!1;return n=n||f.animation,"string"==typeof n&&(n=n.split(" "),e.each(n,function(e,n){(n===b.inward||n===b.outward)&&(t=!0)})),t},inlineDisplay:function(){var n=w.attr("style")||"";return e.isArray(n.match(/display.*?;/,""))}},set:{animating:function(e){var n;C.remove.completeCallback(),e=e||f.animation,n=C.get.animationClass(e),C.save.animation(n),C.force.visible(),C.remove.hidden(),C.remove.direction(),C.start.animation(n)},duration:function(e,n){n=n||f.duration,n="number"==typeof n?n+"ms":n,(n||0===n)&&(C.verbose("Setting animation duration",n),w.css({"animation-duration":n}))},direction:function(e){e=e||C.get.direction(),e==b.inward?C.set.inward():C.set.outward()},looping:function(){C.debug("Transition set to loop"),w.addClass(b.looping)},hidden:function(){w.addClass(b.transition).addClass(b.hidden)},inward:function(){C.debug("Setting direction to inward"),w.removeClass(b.outward).addClass(b.inward)},outward:function(){C.debug("Setting direction to outward"),w.removeClass(b.inward).addClass(b.outward)},visible:function(){w.addClass(b.transition).addClass(b.visible)}},start:{animation:function(e){e=e||C.get.animationClass(),C.debug("Starting tween",e),w.addClass(e).one(h+".complete"+x,C.complete),f.useFailSafe&&C.add.failSafe(),C.set.duration(f.duration),f.onStart.call(this)}},save:{animation:function(e){C.cache||(C.cache={}),C.cache.animation=e},displayType:function(e){"none"!==e&&w.data(v.displayType,e)},transitionExists:function(n,t){e.fn.transition.exists[n]=t,C.verbose("Saving existence of transition",n,t)}},restore:{conditions:function(){var e=C.get.currentAnimation();e&&(w.removeClass(e),C.verbose("Removing animation class",C.cache)),C.remove.duration()}},add:{failSafe:function(){var e=C.get.duration();C.timer=setTimeout(function(){w.triggerHandler(h)},e+f.failSafeDelay),C.verbose("Adding fail safe timer",C.timer)}},remove:{animating:function(){w.removeClass(b.animating)},animationCallbacks:function(){C.remove.queueCallback(),C.remove.completeCallback()},queueCallback:function(){w.off(".queue"+x)},completeCallback:function(){w.off(".complete"+x)},display:function(){w.css("display","")},direction:function(){w.removeClass(b.inward).removeClass(b.outward)},duration:function(){w.css("animation-duration","")},failSafe:function(){C.verbose("Removing fail safe timer",C.timer),C.timer&&clearTimeout(C.timer)},hidden:function(){w.removeClass(b.hidden)},visible:function(){w.removeClass(b.visible)},looping:function(){C.debug("Transitions are no longer looping"),C.is.looping()&&(C.reset(),w.removeClass(b.looping))},transition:function(){w.removeClass(b.visible).removeClass(b.hidden)}},get:{settings:function(n,t,o){return"object"==typeof n?e.extend(!0,{},e.fn.transition.settings,n):"function"==typeof o?e.extend({},e.fn.transition.settings,{animation:n,onComplete:o,duration:t}):"string"==typeof t||"number"==typeof t?e.extend({},e.fn.transition.settings,{animation:n,duration:t}):"object"==typeof t?e.extend({},e.fn.transition.settings,t,{animation:n}):"function"==typeof t?e.extend({},e.fn.transition.settings,{animation:n,onComplete:t}):e.extend({},e.fn.transition.settings,{animation:n})},animationClass:function(e){var n=e||f.animation,t=C.can.transition()&&!C.has.direction()?C.get.direction()+" ":"";return b.animating+" "+b.transition+" "+t+n},currentAnimation:function(){return C.cache&&C.cache.animation!==o?C.cache.animation:!1},currentDirection:function(){return C.is.inward()?b.inward:b.outward},direction:function(){return C.is.hidden()||!C.is.visible()?b.inward:b.outward},animationDirection:function(n){var t;return n=n||f.animation,"string"==typeof n&&(n=n.split(" "),e.each(n,function(e,n){n===b.inward?t=b.inward:n===b.outward&&(t=b.outward)})),t?t:!1},duration:function(e){return e=e||f.duration,e===!1&&(e=w.css("animation-duration")||0),"string"==typeof e?e.indexOf("ms")>-1?parseFloat(e):1e3*parseFloat(e):e},displayType:function(){return f.displayType?f.displayType:(w.data(v.displayType)===o&&C.can.transition(!0),w.data(v.displayType))},userStyle:function(e){return e=e||w.attr("style")||"",e.replace(/display.*?;/,"")},transitionExists:function(n){return e.fn.transition.exists[n]},animationStartEvent:function(){var e,n=t.createElement("div"),i={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(e in i)if(n.style[e]!==o)return i[e];return!1},animationEndEvent:function(){var e,n=t.createElement("div"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(n.style[e]!==o)return i[e];return!1}},can:{transition:function(n){var t,i,a,r,s,c,l,u=f.animation,d=C.get.transitionExists(u);if(d===o||n){if(C.verbose("Determining whether animation exists"),t=w.attr("class"),i=w.prop("tagName"),a=e("<"+i+" />").addClass(t).insertAfter(w),r=a.addClass(u).removeClass(b.inward).removeClass(b.outward).addClass(b.animating).addClass(b.transition).css("animationName"),s=a.addClass(b.inward).css("animationName"),l=a.attr("class",t).removeAttr("style").removeClass(b.hidden).removeClass(b.visible).show().css("display"),C.verbose("Determining final display state",l),C.save.displayType(l),a.remove(),r!=s)C.debug("Direction exists for animation",u),c=!0;else{if("none"==r||!r)return void C.debug("No animation defined in css",u);C.debug("Static animation found",u,l),c=!1}C.save.transitionExists(u,c)}return d!==o?d:c},animate:function(){return C.can.transition()!==o}},is:{animating:function(){return w.hasClass(b.animating)},inward:function(){return w.hasClass(b.inward)},outward:function(){return w.hasClass(b.outward)},looping:function(){return w.hasClass(b.looping)},occurring:function(e){return e=e||f.animation,e="."+e.replace(" ","."),w.filter(e).length>0},visible:function(){return w.is(":visible")},hidden:function(){return"hidden"===w.css("visibility")},supported:function(){return h!==!1}},hide:function(){C.verbose("Hiding element"),C.is.animating()&&C.reset(),T.blur(),C.remove.display(),C.remove.visible(),C.set.hidden(),C.force.hidden(),f.onHide.call(this),f.onComplete.call(this)},show:function(e){C.verbose("Showing element",e),C.remove.hidden(),C.set.visible(),C.force.visible(),f.onShow.call(this),f.onComplete.call(this)},toggle:function(){C.is.visible()?C.hide():C.show()},stop:function(){C.debug("Stopping current animation"),w.triggerHandler(h)},stopAll:function(){C.debug("Stopping all animation"),C.remove.queueCallback(),w.triggerHandler(h)},clear:{queue:function(){C.debug("Clearing animation queue"),C.remove.queueCallback()}},enable:function(){C.verbose("Starting animation"),w.removeClass(b.disabled)},disable:function(){C.debug("Stopping animation"),w.addClass(b.disabled)},setting:function(n,t){if(C.debug("Changing setting",n,t),e.isPlainObject(n))e.extend(!0,f,n);else{if(t===o)return f[n];f[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,C,n);else{if(t===o)return C[n];C[n]=t}},debug:function(){f.debug&&(f.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,f.name+":"),C.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),C.verbose.apply(console,arguments)))},error:function(){C.error=Function.prototype.bind.call(console.error,console,f.name+":"),C.error.apply(console,arguments)},performance:{log:function(e){var n,t,o;f.performance&&(n=(new Date).getTime(),o=s||n,t=n-o,s=n,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":t})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(C.performance.display,500)},display:function(){var n=f.name+":",t=0;s=!1,clearTimeout(C.performance.timer),e.each(c,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",r&&(n+=" '"+r+"'"),a.length>1&&(n+=" ("+a.length+")"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(n),console.table?console.table(c):e.each(c,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(n,t,a){var r,s,c,l=g;return t=t||d,a=T||a,"string"==typeof n&&l!==o&&(n=n.split(/[\. ]/),r=n.length-1,e.each(n,function(t,i){var a=t!=r?i+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(l[a])&&t!=r)l=l[a];else{if(l[a]!==o)return s=l[a],!1;if(!e.isPlainObject(l[i])||t==r)return l[i]!==o?(s=l[i],!1):!1;l=l[i]}})),e.isFunction(s)?c=s.apply(a,t):s!==o&&(c=s),e.isArray(i)?i.push(c):i!==o?i=[i,c]:c!==o&&(i=c),s!==o?s:!1}},C.initialize()}),i!==o?i:this},e.fn.transition.exists={},e.fn.transition.settings={name:"Transition",debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"There is no css animation matching the one you specified. Please make sure your css is vendor prefixed, and you have included transition css.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(jQuery,window,document),function(e,n,t,o){"use strict";e.api=e.fn.api=function(t){var i,a=e(e.isFunction(this)?n:this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var a,m,f,g,p,b,v=e.isPlainObject(t)?e.extend(!0,{},e.fn.api.settings,t):e.extend({},e.fn.api.settings),h=v.namespace,y=v.metadata,x=v.selector,C=v.error,w=v.className,T="."+h,P="module-"+h,R=e(this),S=R.closest(x.form),A=v.stateContext?e(v.stateContext):R,k=this,q=A[0],O=R.data(P);b={initialize:function(){u||b.bind.events(),b.instantiate()},instantiate:function(){b.verbose("Storing instance of module",b),O=b,R.data(P,O)},destroy:function(){b.verbose("Destroying previous module for",k),R.removeData(P).off(T)},bind:{events:function(){var e=b.get.event();e?(b.verbose("Attaching API events to element",e),R.on(e+T,b.event.trigger)):"now"==v.on&&(b.debug("Querying API now",e),b.query())}},read:{cachedResponse:function(e){var t;if(n.Storage===o)return void b.error(C.noStorage);if(t=sessionStorage.getItem(e),b.debug("Using cached response",e,t),t!==o){try{t=JSON.parse(t)}catch(i){}return t}return!1}},write:{cachedResponse:function(t,i){return i&&""===i?void b.debug("Response empty, not caching",i):n.Storage===o?void b.error(C.noStorage):(e.isPlainObject(i)&&(i=JSON.stringify(i)),sessionStorage.setItem(t,i),void b.verbose("Storing cached response for url",t,i))}},query:function(){if(b.is.disabled())return void b.debug("Element is disabled API request aborted");if(b.is.loading()){if(!v.interruptRequests)return void b.debug("Cancelling request, previous request is still pending");b.debug("Interrupting previous request"),b.abort()}return v.defaultData&&e.extend(!0,v.urlData,b.get.defaultData()),v.serializeForm&&(v.data=b.add.formData(v.data)),m=b.get.settings(),m===!1?(b.cancelled=!0,void b.error(C.beforeSend)):(b.cancelled=!1,f=b.get.templatedURL(),f||b.is.mocked()?(f=b.add.urlData(f),f||b.is.mocked()?(a=e.extend(!0,{},v,{type:v.method||v.type,data:g,url:v.base+f,beforeSend:v.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),b.debug("Querying URL",a.url),b.verbose("Using AJAX settings",a),"local"===v.cache&&b.read.cachedResponse(f)?(b.debug("Response returned from local cache"),b.request=b.create.request(),void b.request.resolveWith(q,[b.read.cachedResponse(f)])):void(v.throttle?v.throttleFirstRequest||b.timer?(b.debug("Throttling request",v.throttle),clearTimeout(b.timer),b.timer=setTimeout(function(){b.timer&&delete b.timer,b.debug("Sending throttled request",g,a.method),b.send.request()},v.throttle)):(b.debug("Sending request",g,a.method),b.send.request(),b.timer=setTimeout(function(){},v.throttle)):(b.debug("Sending request",g,a.method),b.send.request()))):void 0):void b.error(C.missingURL))},is:{disabled:function(){return R.filter(x.disabled).length>0},form:function(){return R.is("form")},mocked:function(){return v.mockResponse||v.mockResponseAsync},input:function(){return R.is("input")},loading:function(){return b.request&&"pending"==b.request.state()},abortedRequest:function(e){return e&&e.readyState!==o&&0===e.readyState?(b.verbose("XHR request determined to be aborted"),!0):(b.verbose("XHR request was not aborted"),!1)},validResponse:function(n){return"json"===v.dataType&&e.isFunction(v.successTest)?(b.debug("Checking JSON returned success",v.successTest,n),v.successTest(n)?(b.debug("Response passed success test",n),!0):(b.debug("Response failed success test",n),!1)):(b.verbose("Response is not JSON, skipping validation",v.successTest,n),!0)}},was:{cancelled:function(){return b.cancelled||!1},succesful:function(){return b.request&&"resolved"==b.request.state()},failure:function(){return b.request&&"rejected"==b.request.state()},complete:function(){return b.request&&("resolved"==b.request.state()||"rejected"==b.request.state())}},add:{urlData:function(n,t){var i,a;return n&&(i=n.match(v.regExp.required),a=n.match(v.regExp.optional),t=t||v.urlData,i&&(b.debug("Looking for required URL variables",i),e.each(i,function(i,a){var r=-1!==a.indexOf("$")?a.substr(2,a.length-3):a.substr(1,a.length-2),s=e.isPlainObject(t)&&t[r]!==o?t[r]:R.data(r)!==o?R.data(r):A.data(r)!==o?A.data(r):t[r];return s===o?(b.error(C.requiredParameter,r,n),n=!1,!1):(b.verbose("Found required variable",r,s),void(n=n.replace(a,s)))})),a&&(b.debug("Looking for optional URL variables",i),e.each(a,function(i,a){var r=-1!==a.indexOf("$")?a.substr(3,a.length-4):a.substr(2,a.length-3),s=e.isPlainObject(t)&&t[r]!==o?t[r]:R.data(r)!==o?R.data(r):A.data(r)!==o?A.data(r):t[r];s!==o?(b.verbose("Optional variable Found",r,s),n=n.replace(a,s)):(b.verbose("Optional variable not found",r),n=-1!==n.indexOf("/"+a)?n.replace("/"+a,""):n.replace(a,""))}))),n},formData:function(n){var t,i=e.fn.serializeObject!==o,a=i?S.serializeObject():S.serialize();return n=n||v.data,t=e.isPlainObject(n),t?i?(b.debug("Extending existing data with form data",n,a),n=e.extend(!0,{},n,a)):(b.error(C.missingSerialize),b.debug("Cant extend data. Replacing data with form data",n,a),n=a):(b.debug("Adding form data",a),n=a),n}},send:{request:function(){b.set.loading(),b.request=b.create.request(),b.is.mocked()?b.mockedXHR=b.create.mockedXHR():b.xhr=b.create.xhr(),v.onRequest.call(q,b.request,b.xhr)}},event:{trigger:function(e){b.query(),("submit"==e.type||"click"==e.type)&&e.preventDefault()},xhr:{always:function(){},done:function(n,t,o){var i=this,a=(new Date).getTime()-p,r=v.loadingDuration-a,s=e.isFunction(v.onResponse)?v.onResponse.call(i,e.extend(!0,{},n)):!1;r=r>0?r:0,s&&(b.debug("Modified API response in onResponse callback",v.onResponse,s,n),n=s),r>0&&b.debug("Response completed early delaying state change by",r),
setTimeout(function(){b.is.validResponse(n)?b.request.resolveWith(i,[n]):b.request.rejectWith(i,[o,"invalid"])},r)},fail:function(e,n,t){var o=this,i=(new Date).getTime()-p,a=v.loadingDuration-i;a=a>0?a:0,a>0&&b.debug("Response completed early delaying state change by",a),setTimeout(function(){b.is.abortedRequest(e)?b.request.rejectWith(o,[e,"aborted",t]):b.request.rejectWith(o,[e,"error",n,t])},a)}},request:{complete:function(e){b.remove.loading(),v.onComplete.call(q,e,R)},done:function(e){b.debug("Successful API Response",e),"local"===v.cache&&f&&(b.write.cachedResponse(f,e),b.debug("Saving server response locally",b.cache)),v.onSuccess.call(q,e,R)},fail:function(n,t,i){var r=e.isPlainObject(n)?n.responseText:!1,s=e.isPlainObject(r)&&r.error!==o?r.error:v.error[t]!==o?v.error[t]:i;"aborted"==t?(b.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,i),v.onAbort.call(q,t,R)):"invalid"==t?b.debug("JSON did not pass success test. A server-side error has most likely occurred",r):"error"==t&&n!==o&&(b.debug("XHR produced a server error",t,i),200!=n.status&&i!==o&&""!==i&&b.error(C.statusMessage+i,a.url),v.onError.call(q,s,R)),v.errorDuration&&"aborted"!==t&&(b.debug("Adding error state"),b.set.error(),setTimeout(b.remove.error,v.errorDuration)),b.debug("API Request failed",s,n),v.onFailure.call(q,r,R)}}},create:{request:function(){return e.Deferred().always(b.event.request.complete).done(b.event.request.done).fail(b.event.request.fail)},mockedXHR:function(){var n,t,o,i=!1,a=!1,r=!1;return o=e.Deferred().always(b.event.xhr.complete).done(b.event.xhr.done).fail(b.event.xhr.fail),v.mockResponse?(e.isFunction(v.mockResponse)?(b.debug("Using mocked callback returning response",v.mockResponse),t=v.mockResponse.call(q,v)):(b.debug("Using specified response",v.mockResponse),t=v.mockResponse),o.resolveWith(q,[t,i,{responseText:t}])):e.isFunction(v.mockResponseAsync)&&(n=function(e){b.debug("Async callback returned response",e),e?o.resolveWith(q,[e,i,{responseText:e}]):o.rejectWith(q,[{responseText:e},a,r])},b.debug("Using async mocked response",v.mockResponseAsync),v.mockResponseAsync.call(q,v,n)),o},xhr:function(){var n;return n=e.ajax(a).always(b.event.xhr.always).done(b.event.xhr.done).fail(b.event.xhr.fail),b.verbose("Created server request",n),n}},set:{error:function(){b.verbose("Adding error state to element",A),A.addClass(w.error)},loading:function(){b.verbose("Adding loading state to element",A),A.addClass(w.loading),p=(new Date).getTime()}},remove:{error:function(){b.verbose("Removing error state from element",A),A.removeClass(w.error)},loading:function(){b.verbose("Removing loading state from element",A),A.removeClass(w.loading)}},get:{request:function(){return b.request||!1},xhr:function(){return b.xhr||!1},settings:function(){var e;return e=v.beforeSend.call(q,v),e&&(e.success!==o&&(b.debug("Legacy success callback detected",e),b.error(C.legacyParameters,e.success),e.onSuccess=e.success),e.failure!==o&&(b.debug("Legacy failure callback detected",e),b.error(C.legacyParameters,e.failure),e.onFailure=e.failure),e.complete!==o&&(b.debug("Legacy complete callback detected",e),b.error(C.legacyParameters,e.complete),e.onComplete=e.complete)),e===o&&b.error(C.noReturnedValue),e!==o?e:v},defaultData:function(){var n={};return e.isWindow(k)||(b.is.input()?n.value=R.val():b.is.form()&&(n.text=R.text())),n},event:function(){return e.isWindow(k)||"now"==v.on?(b.debug("API called without element, no events attached"),!1):"auto"==v.on?R.is("input")?k.oninput!==o?"input":k.onpropertychange!==o?"propertychange":"keyup":R.is("form")?"submit":"click":v.on},templatedURL:function(e){if(e=e||R.data(y.action)||v.action||!1,f=R.data(y.url)||v.url||!1)return b.debug("Using specified url",f),f;if(e){if(b.debug("Looking up url for action",e,v.api),v.api[e]===o&&!b.is.mocked())return void b.error(C.missingAction,v.action,v.api);f=v.api[e]}else b.is.form()&&(f=R.attr("action")||!1,b.debug("No url or action specified, defaulting to form action",f));return f}},abort:function(){var e=b.get.xhr();e&&"resolved"!==e.state()&&(b.debug("Cancelling API request"),e.abort())},reset:function(){b.remove.error(),b.remove.loading()},setting:function(n,t){if(b.debug("Changing setting",n,t),e.isPlainObject(n))e.extend(!0,v,n);else{if(t===o)return v[n];v[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,b,n);else{if(t===o)return b[n];b[n]=t}},debug:function(){v.debug&&(v.performance?b.performance.log(arguments):(b.debug=Function.prototype.bind.call(console.info,console,v.name+":"),b.debug.apply(console,arguments)))},verbose:function(){v.verbose&&v.debug&&(v.performance?b.performance.log(arguments):(b.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),b.verbose.apply(console,arguments)))},error:function(){b.error=Function.prototype.bind.call(console.error,console,v.name+":"),b.error.apply(console,arguments)},performance:{log:function(e){var n,t,o;v.performance&&(n=(new Date).getTime(),o=s||n,t=n-o,s=n,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":t})),clearTimeout(b.performance.timer),b.performance.timer=setTimeout(b.performance.display,500)},display:function(){var n=v.name+":",t=0;s=!1,clearTimeout(b.performance.timer),e.each(c,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",r&&(n+=" '"+r+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(n),console.table?console.table(c):e.each(c,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(n,t,a){var r,s,c,l=O;return t=t||d,a=k||a,"string"==typeof n&&l!==o&&(n=n.split(/[\. ]/),r=n.length-1,e.each(n,function(t,i){var a=t!=r?i+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(l[a])&&t!=r)l=l[a];else{if(l[a]!==o)return s=l[a],!1;if(!e.isPlainObject(l[i])||t==r)return l[i]!==o?(s=l[i],!1):(b.error(C.method,n),!1);l=l[i]}})),e.isFunction(s)?c=s.apply(a,t):s!==o&&(c=s),e.isArray(i)?i.push(c):i!==o?i=[i,c]:c!==o&&(i=c),s}},u?(O===o&&b.initialize(),b.invoke(l)):(O!==o&&O.invoke("destroy"),b.initialize())}),i!==o?i:this},e.api.settings={name:"API",namespace:"api",debug:!0,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,errorDuration:2e3,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,n){},onResponse:!1,onSuccess:function(e,n){},onComplete:function(e,n){},onFailure:function(e,n){},onError:function(e,n){},onAbort:function(e,n){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching respopnses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document),function(e,n,t,o){"use strict";e.fn.state=function(n){var i,a=e(this),r=a.selector||"",s=("ontouchstart"in t.documentElement,(new Date).getTime()),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var t,m=e.isPlainObject(n)?e.extend(!0,{},e.fn.state.settings,n):e.extend({},e.fn.state.settings),f=m.error,g=m.metadata,p=m.className,b=m.namespace,v=m.states,h=m.text,y="."+b,x=b+"-module",C=e(this),w=this,T=C.data(x);t={initialize:function(){t.verbose("Initializing module"),m.automatic&&t.add.defaults(),m.context&&""!==r?e(m.context).on(r,"mouseenter"+y,t.change.text).on(r,"mouseleave"+y,t.reset.text).on(r,"click"+y,t.toggle.state):C.on("mouseenter"+y,t.change.text).on("mouseleave"+y,t.reset.text).on("click"+y,t.toggle.state),t.instantiate()},instantiate:function(){t.verbose("Storing instance of module",t),T=t,C.data(x,t)},destroy:function(){t.verbose("Destroying previous module",T),C.off(y).removeData(x)},refresh:function(){t.verbose("Refreshing selector cache"),C=e(w)},add:{defaults:function(){var i=n&&e.isPlainObject(n.states)?n.states:{};e.each(m.defaults,function(n,a){t.is[n]!==o&&t.is[n]()&&(t.verbose("Adding default states",n,w),e.extend(m.states,a,i))})}},is:{active:function(){return C.hasClass(p.active)},loading:function(){return C.hasClass(p.loading)},inactive:function(){return!C.hasClass(p.active)},state:function(e){return p[e]===o?!1:C.hasClass(p[e])},enabled:function(){return!C.is(m.filter.active)},disabled:function(){return C.is(m.filter.active)},textEnabled:function(){return!C.is(m.filter.text)},button:function(){return C.is(".button:not(a, .submit)")},input:function(){return C.is("input")},progress:function(){return C.is(".ui.progress")}},allow:function(e){t.debug("Now allowing state",e),v[e]=!0},disallow:function(e){t.debug("No longer allowing",e),v[e]=!1},allows:function(e){return v[e]||!1},enable:function(){C.removeClass(p.disabled)},disable:function(){C.addClass(p.disabled)},setState:function(e){t.allows(e)&&C.addClass(p[e])},removeState:function(e){t.allows(e)&&C.removeClass(p[e])},toggle:{state:function(){var n,i;if(t.allows("active")&&t.is.enabled()){if(t.refresh(),e.fn.api!==o)if(n=C.api("get request"),i=C.api("was cancelled"))t.debug("API Request cancelled by beforesend"),m.activateTest=function(){return!1},m.deactivateTest=function(){return!1};else if(n)return void t.listenTo(n);t.change.state()}}},listenTo:function(n){t.debug("API request detected, waiting for state signal",n),n&&(h.loading&&t.update.text(h.loading),e.when(n).then(function(){"resolved"==n.state()?(t.debug("API request succeeded"),m.activateTest=function(){return!0},m.deactivateTest=function(){return!0}):(t.debug("API request failed"),m.activateTest=function(){return!1},m.deactivateTest=function(){return!1}),t.change.state()}))},change:{state:function(){t.debug("Determining state change direction"),t.is.inactive()?t.activate():t.deactivate(),m.sync&&t.sync(),m.onChange.call(w)},text:function(){t.is.textEnabled()&&(t.is.disabled()?(t.verbose("Changing text to disabled text",h.hover),t.update.text(h.disabled)):t.is.active()?h.hover?(t.verbose("Changing text to hover text",h.hover),t.update.text(h.hover)):h.deactivate&&(t.verbose("Changing text to deactivating text",h.deactivate),t.update.text(h.deactivate)):h.hover?(t.verbose("Changing text to hover text",h.hover),t.update.text(h.hover)):h.activate&&(t.verbose("Changing text to activating text",h.activate),t.update.text(h.activate)))}},activate:function(){m.activateTest.call(w)&&(t.debug("Setting state to active"),C.addClass(p.active),t.update.text(h.active),m.onActivate.call(w))},deactivate:function(){m.deactivateTest.call(w)&&(t.debug("Setting state to inactive"),C.removeClass(p.active),t.update.text(h.inactive),m.onDeactivate.call(w))},sync:function(){t.verbose("Syncing other buttons to current state"),a.not(C).state(t.is.active()?"activate":"deactivate")},get:{text:function(){return m.selector.text?C.find(m.selector.text).text():C.html()},textFor:function(e){return h[e]||!1}},flash:{text:function(e,n,o){var i=t.get.text();t.debug("Flashing text message",e,n),e=e||m.text.flash,n=n||m.flashDuration,o=o||function(){},t.update.text(e),setTimeout(function(){t.update.text(i),o.call(w)},n)}},reset:{text:function(){var e=h.active||C.data(g.storedText),n=h.inactive||C.data(g.storedText);t.is.textEnabled()&&(t.is.active()&&e?(t.verbose("Resetting active text",e),t.update.text(e)):n&&(t.verbose("Resetting inactive text",e),t.update.text(n)))}},update:{text:function(e){var n=t.get.text();e&&e!==n?(t.debug("Updating text",e),m.selector.text?C.data(g.storedText,e).find(m.selector.text).text(e):C.data(g.storedText,e).html(e)):t.debug("Text is already set, ignoring update",e)}},setting:function(n,i){if(t.debug("Changing setting",n,i),e.isPlainObject(n))e.extend(!0,m,n);else{if(i===o)return m[n];m[n]=i}},internal:function(n,i){if(e.isPlainObject(n))e.extend(!0,t,n);else{if(i===o)return t[n];t[n]=i}},debug:function(){m.debug&&(m.performance?t.performance.log(arguments):(t.debug=Function.prototype.bind.call(console.info,console,m.name+":"),t.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?t.performance.log(arguments):(t.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),t.verbose.apply(console,arguments)))},error:function(){t.error=Function.prototype.bind.call(console.error,console,m.name+":"),t.error.apply(console,arguments)},performance:{log:function(e){var n,o,i;m.performance&&(n=(new Date).getTime(),i=s||n,o=n-i,s=n,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":o})),clearTimeout(t.performance.timer),t.performance.timer=setTimeout(t.performance.display,500)},display:function(){var n=m.name+":",i=0;s=!1,clearTimeout(t.performance.timer),e.each(c,function(e,n){i+=n["Execution Time"]}),n+=" "+i+"ms",r&&(n+=" '"+r+"'"),(console.group!==o||console.table!==o)&&c.length>0&&(console.groupCollapsed(n),console.table?console.table(c):e.each(c,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(n,a,r){var s,c,l,u=T;return a=a||d,r=w||r,"string"==typeof n&&u!==o&&(n=n.split(/[\. ]/),s=n.length-1,e.each(n,function(i,a){var r=i!=s?a+n[i+1].charAt(0).toUpperCase()+n[i+1].slice(1):n;if(e.isPlainObject(u[r])&&i!=s)u=u[r];else{if(u[r]!==o)return c=u[r],!1;if(!e.isPlainObject(u[a])||i==s)return u[a]!==o?(c=u[a],!1):(t.error(f.method,n),!1);u=u[a]}})),e.isFunction(c)?l=c.apply(r,a):c!==o&&(l=c),e.isArray(i)?i.push(l):i!==o?i=[i,l]:l!==o&&(i=l),c}},u?(T===o&&t.initialize(),t.invoke(l)):(T!==o&&T.invoke("destroy"),t.initialize())}),i!==o?i:this},e.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{beforeSend:"The before send function has cancelled state change",method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}}(jQuery,window,document),function(e,n,t,o){"use strict";e.fn.visibility=function(i){var a,r=e(this),s=r.selector||"",c=(new Date).getTime(),l=[],u=arguments[0],d="string"==typeof u,m=[].slice.call(arguments,1);return r.each(function(){var r,f,g,p=e.isPlainObject(i)?e.extend(!0,{},e.fn.visibility.settings,i):e.extend({},e.fn.visibility.settings),b=p.className,v=p.namespace,h=p.error,y=p.metadata,x="."+v,C="module-"+v,w=e(n),T=e(this),P=e(p.context),R=(T.selector||"",T.data(C)),S=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(e){setTimeout(e,0)},A=this,k=!1;g={initialize:function(){g.debug("Initializing",p),g.setup.cache(),g.should.trackChanges()&&("image"==p.type&&g.setup.image(),"fixed"==p.type&&g.setup.fixed(),p.observeChanges&&g.observeChanges(),g.bind.events()),g.save.position(),g.is.visible()||g.error(h.visible,T),p.initialCheck&&g.checkVisibility(),g.instantiate()},instantiate:function(){g.debug("Storing instance",g),T.data(C,g),R=g},destroy:function(){g.verbose("Destroying previous module"),f&&f.disconnect(),w.off("load"+x,g.event.load).off("resize"+x,g.event.resize),P.off("scrollchange"+x,g.event.scrollchange),T.off(x).removeData(C)},observeChanges:function(){"MutationObserver"in n&&(f=new MutationObserver(function(e){g.verbose("DOM tree modified, updating visibility calculations"),g.timer=setTimeout(function(){g.verbose("DOM tree modified, updating sticky menu"),g.refresh()},100)}),f.observe(A,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",f))},bind:{events:function(){g.verbose("Binding visibility events to scroll and resize"),p.refreshOnLoad&&w.on("load"+x,g.event.load),w.on("resize"+x,g.event.resize),P.off("scroll"+x).on("scroll"+x,g.event.scroll).on("scrollchange"+x,g.event.scrollchange)}},event:{resize:function(){g.debug("Window resized"),p.refreshOnResize&&S(g.refresh)},load:function(){g.debug("Page finished loading"),S(g.refresh)},scroll:function(){p.throttle?(clearTimeout(g.timer),g.timer=setTimeout(function(){P.triggerHandler("scrollchange"+x,[P.scrollTop()])},p.throttle)):S(function(){P.triggerHandler("scrollchange"+x,[P.scrollTop()])})},scrollchange:function(e,n){g.checkVisibility(n)}},precache:function(n,o){n instanceof Array||(n=[n]);for(var i=n.length,a=0,r=[],s=t.createElement("img"),c=function(){a++,a>=n.length&&e.isFunction(o)&&o()};i--;)s=t.createElement("img"),s.onload=c,s.onerror=c,s.src=n[i],r.push(s)},enableCallbacks:function(){g.debug("Allowing callbacks to occur"),k=!1},disableCallbacks:function(){g.debug("Disabling all callbacks temporarily"),k=!0},should:{trackChanges:function(){return d?(g.debug("One time query, no need to bind events"),!1):(g.debug("Callbacks being attached"),!0)}},setup:{cache:function(){g.cache={occurred:{},screen:{},element:{}}},image:function(){var e=T.data(y.src);e&&(g.verbose("Lazy loading image",e),p.once=!0,p.observeChanges=!1,p.onOnScreen=function(){g.debug("Image on screen",A),g.precache(e,function(){g.set.image(e)})})},fixed:function(){g.debug("Setting up fixed"),p.once=!1,p.observeChanges=!1,p.initialCheck=!0,p.refreshOnLoad=!0,i.transition||(p.transition=!1),g.create.placeholder(),g.debug("Added placeholder",r),p.onTopPassed=function(){g.debug("Element passed, adding fixed position",T),g.show.placeholder(),g.set.fixed(),p.transition&&e.fn.transition!==o&&T.transition(p.transition,p.duration)},p.onTopPassedReverse=function(){g.debug("Element returned to position, removing fixed",T),g.hide.placeholder(),g.remove.fixed()}}},create:{placeholder:function(){g.verbose("Creating fixed position placeholder"),r=T.clone(!1).css("display","none").addClass(b.placeholder).insertAfter(T)}},show:{placeholder:function(){g.verbose("Showing placeholder"),r.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){g.verbose("Hiding placeholder"),r.css("display","none").css("visibility","")}},set:{fixed:function(){g.verbose("Setting element to fixed position"),T.addClass(b.fixed).css({position:"fixed",top:p.offset+"px",left:"auto",zIndex:"1"})},image:function(n){T.attr("src",n),p.transition?e.fn.transition!==o?T.transition(p.transition,p.duration):T.fadeIn(p.duration):T.show()}},is:{onScreen:function(){var e=g.get.elementCalculations();return e.onScreen},offScreen:function(){var e=g.get.elementCalculations();return e.offScreen},visible:function(){return g.cache&&g.cache.element?!(0===g.cache.element.width&&0===g.cache.element.offset.top):!1}},refresh:function(){g.debug("Refreshing constants (width/height)"),"fixed"==p.type&&(g.remove.fixed(),g.remove.occurred()),g.reset(),g.save.position(),p.checkOnRefresh&&g.checkVisibility(),p.onRefresh.call(A)},reset:function(){g.verbose("Reseting all cached values"),e.isPlainObject(g.cache)&&(g.cache.screen={},g.cache.element={})},checkVisibility:function(e){g.verbose("Checking visibility of element",g.cache.element),!k&&g.is.visible()&&(g.save.scroll(e),g.save.calculations(),g.passed(),g.passingReverse(),g.topVisibleReverse(),g.bottomVisibleReverse(),g.topPassedReverse(),g.bottomPassedReverse(),g.onScreen(),g.offScreen(),g.passing(),g.topVisible(),g.bottomVisible(),g.topPassed(),g.bottomPassed(),p.onUpdate&&p.onUpdate.call(A,g.get.elementCalculations()))},passed:function(n,t){var i=g.get.elementCalculations();if(n&&t)p.onPassed[n]=t;else{if(n!==o)return g.get.pixelsPassed(n)>i.pixelsPassed;i.passing&&e.each(p.onPassed,function(e,n){i.bottomVisible||i.pixelsPassed>g.get.pixelsPassed(e)?g.execute(n,e):p.once||g.remove.occurred(n)})}},onScreen:function(e){var n=g.get.elementCalculations(),t=e||p.onOnScreen,i="onScreen";return e&&(g.debug("Adding callback for onScreen",e),p.onOnScreen=e),n.onScreen?g.execute(t,i):p.once||g.remove.occurred(i),e!==o?n.onOnScreen:void 0},offScreen:function(e){var n=g.get.elementCalculations(),t=e||p.onOffScreen,i="offScreen";return e&&(g.debug("Adding callback for offScreen",e),p.onOffScreen=e),n.offScreen?g.execute(t,i):p.once||g.remove.occurred(i),e!==o?n.onOffScreen:void 0},passing:function(e){var n=g.get.elementCalculations(),t=e||p.onPassing,i="passing";return e&&(g.debug("Adding callback for passing",e),p.onPassing=e),n.passing?g.execute(t,i):p.once||g.remove.occurred(i),e!==o?n.passing:void 0},topVisible:function(e){var n=g.get.elementCalculations(),t=e||p.onTopVisible,i="topVisible";return e&&(g.debug("Adding callback for top visible",e),p.onTopVisible=e),n.topVisible?g.execute(t,i):p.once||g.remove.occurred(i),e===o?n.topVisible:void 0},bottomVisible:function(e){var n=g.get.elementCalculations(),t=e||p.onBottomVisible,i="bottomVisible";return e&&(g.debug("Adding callback for bottom visible",e),p.onBottomVisible=e),n.bottomVisible?g.execute(t,i):p.once||g.remove.occurred(i),e===o?n.bottomVisible:void 0},topPassed:function(e){var n=g.get.elementCalculations(),t=e||p.onTopPassed,i="topPassed";return e&&(g.debug("Adding callback for top passed",e),p.onTopPassed=e),n.topPassed?g.execute(t,i):p.once||g.remove.occurred(i),e===o?n.topPassed:void 0},bottomPassed:function(e){var n=g.get.elementCalculations(),t=e||p.onBottomPassed,i="bottomPassed";return e&&(g.debug("Adding callback for bottom passed",e),p.onBottomPassed=e),n.bottomPassed?g.execute(t,i):p.once||g.remove.occurred(i),e===o?n.bottomPassed:void 0},passingReverse:function(e){var n=g.get.elementCalculations(),t=e||p.onPassingReverse,i="passingReverse";return e&&(g.debug("Adding callback for passing reverse",e),p.onPassingReverse=e),n.passing?p.once||g.remove.occurred(i):g.get.occurred("passing")&&g.execute(t,i),e!==o?!n.passing:void 0},topVisibleReverse:function(e){var n=g.get.elementCalculations(),t=e||p.onTopVisibleReverse,i="topVisibleReverse";return e&&(g.debug("Adding callback for top visible reverse",e),p.onTopVisibleReverse=e),n.topVisible?p.once||g.remove.occurred(i):g.get.occurred("topVisible")&&g.execute(t,i),e===o?!n.topVisible:void 0},bottomVisibleReverse:function(e){var n=g.get.elementCalculations(),t=e||p.onBottomVisibleReverse,i="bottomVisibleReverse";return e&&(g.debug("Adding callback for bottom visible reverse",e),p.onBottomVisibleReverse=e),n.bottomVisible?p.once||g.remove.occurred(i):g.get.occurred("bottomVisible")&&g.execute(t,i),e===o?!n.bottomVisible:void 0},topPassedReverse:function(e){var n=g.get.elementCalculations(),t=e||p.onTopPassedReverse,i="topPassedReverse";return e&&(g.debug("Adding callback for top passed reverse",e),p.onTopPassedReverse=e),n.topPassed?p.once||g.remove.occurred(i):g.get.occurred("topPassed")&&g.execute(t,i),e===o?!n.onTopPassed:void 0},bottomPassedReverse:function(e){var n=g.get.elementCalculations(),t=e||p.onBottomPassedReverse,i="bottomPassedReverse";return e&&(g.debug("Adding callback for bottom passed reverse",e),p.onBottomPassedReverse=e),n.bottomPassed?p.once||g.remove.occurred(i):g.get.occurred("bottomPassed")&&g.execute(t,i),e===o?!n.bottomPassed:void 0},execute:function(e,n){var t=g.get.elementCalculations(),o=g.get.screenCalculations();e=e||!1,e&&(p.continuous?(g.debug("Callback being called continuously",n,t),e.call(A,t,o)):g.get.occurred(n)||(g.debug("Conditions met",n,t),e.call(A,t,o))),g.save.occurred(n)},remove:{fixed:function(){g.debug("Removing fixed position"),T.removeClass(b.fixed).css({position:"",top:"",left:"",zIndex:""})},occurred:function(e){if(e){var n=g.cache.occurred;n[e]!==o&&n[e]===!0&&(g.debug("Callback can now be called again",e),g.cache.occurred[e]=!1)}else g.cache.occurred={}}},save:{calculations:function(){g.verbose("Saving all calculations necessary to determine positioning"),g.save.direction(),g.save.screenCalculations(),g.save.elementCalculations()},occurred:function(e){e&&(g.cache.occurred[e]===o||g.cache.occurred[e]!==!0)&&(g.verbose("Saving callback occurred",e),g.cache.occurred[e]=!0)},scroll:function(e){e=e+p.offset||P.scrollTop()+p.offset,g.cache.scroll=e},direction:function(){var e,n=g.get.scroll(),t=g.get.lastScroll();return e=n>t&&t?"down":t>n&&t?"up":"static",g.cache.direction=e,g.cache.direction},elementPosition:function(){var e=g.cache.element,n=g.get.screenSize();return g.verbose("Saving element position"),e.fits=e.height<n.height,e.offset=T.offset(),e.width=T.outerWidth(),e.height=T.outerHeight(),g.cache.element=e,e},elementCalculations:function(){var e=g.get.screenCalculations(),n=g.get.elementPosition();return p.includeMargin?(n.margin={},n.margin.top=parseInt(T.css("margin-top"),10),n.margin.bottom=parseInt(T.css("margin-bottom"),10),n.top=n.offset.top-n.margin.top,n.bottom=n.offset.top+n.height+n.margin.bottom):(n.top=n.offset.top,n.bottom=n.offset.top+n.height),n.topVisible=e.bottom>=n.top,n.topPassed=e.top>=n.top,n.bottomVisible=e.bottom>=n.bottom,n.bottomPassed=e.top>=n.bottom,n.pixelsPassed=0,n.percentagePassed=0,n.onScreen=n.topVisible&&!n.bottomPassed,n.passing=n.topPassed&&!n.bottomPassed,n.offScreen=!n.onScreen,n.passing&&(n.pixelsPassed=e.top-n.top,n.percentagePassed=(e.top-n.top)/n.height),g.cache.element=n,g.verbose("Updated element calculations",n),n},screenCalculations:function(){var e=g.get.scroll();return g.save.direction(),g.cache.screen.top=e,g.cache.screen.bottom=e+g.cache.screen.height,g.cache.screen},screenSize:function(){g.verbose("Saving window position"),g.cache.screen={height:P.height()}},position:function(){g.save.screenSize(),g.save.elementPosition()}},get:{pixelsPassed:function(e){var n=g.get.elementCalculations();return e.search("%")>-1?n.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return g.cache.occurred!==o?g.cache.occurred[e]||!1:!1},direction:function(){return g.cache.direction===o&&g.save.direction(),g.cache.direction},elementPosition:function(){return g.cache.element===o&&g.save.elementPosition(),g.cache.element},elementCalculations:function(){return g.cache.element===o&&g.save.elementCalculations(),g.cache.element},screenCalculations:function(){return g.cache.screen===o&&g.save.screenCalculations(),g.cache.screen},screenSize:function(){return g.cache.screen===o&&g.save.screenSize(),g.cache.screen},scroll:function(){return g.cache.scroll===o&&g.save.scroll(),g.cache.scroll},lastScroll:function(){return g.cache.screen===o?(g.debug("First scroll event, no last scroll could be found"),!1):g.cache.screen.top}},setting:function(n,t){if(e.isPlainObject(n))e.extend(!0,p,n);else{if(t===o)return p[n];p[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,g,n);else{if(t===o)return g[n];g[n]=t}},debug:function(){p.debug&&(p.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,p.name+":"),g.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,p.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var n,t,o;p.performance&&(n=(new Date).getTime(),o=c||n,t=n-o,c=n,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":t})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var n=p.name+":",t=0;c=!1,clearTimeout(g.performance.timer),e.each(l,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",s&&(n+=" '"+s+"'"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(n),console.table?console.table(l):e.each(l,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(n,t,i){var r,s,c,l=R;return t=t||m,i=A||i,"string"==typeof n&&l!==o&&(n=n.split(/[\. ]/),r=n.length-1,e.each(n,function(t,i){var a=t!=r?i+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(l[a])&&t!=r)l=l[a];else{if(l[a]!==o)return s=l[a],!1;if(!e.isPlainObject(l[i])||t==r)return l[i]!==o?(s=l[i],!1):(g.error(h.method,n),!1);l=l[i]}})),e.isFunction(s)?c=s.apply(i,t):s!==o&&(c=s),e.isArray(a)?a.push(c):a!==o?a=[a,c]:c!==o&&(a=c),s}},d?(R===o&&g.initialize(),R.save.scroll(),R.save.calculations(),g.invoke(u)):(R!==o&&R.invoke("destroy"),g.initialize())}),a!==o?a:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:n,throttle:!1,type:!1,transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(jQuery,window,document);